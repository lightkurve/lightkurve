

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Interactively inspecting Target Pixel Files and Lightcurves &mdash; lightkurve 1.0b10 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Science with lightkurve" href="section2.html" />
    <link rel="prev" title="What are Light Curve File objects?" href="1.04-lightcurve-files.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> lightkurve
          

          
            
            <img src="../_static/lightkurve.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1.0b10
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API documentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="section1.html">Introduction to lightkurve</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="1.02-target-pixel-files.html">What are Target Pixel File objects?</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.03-what-are-lightcurves.html">What are Light Curve objects?</a></li>
<li class="toctree-l2"><a class="reference internal" href="1.04-lightcurve-files.html">What are Light Curve File objects?</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Interactively inspecting Target Pixel Files and Lightcurves</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Using-.interact()">Using <code class="docutils literal notranslate"><span class="pre">.interact()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#Passing-in-a-preprocessed-lightcurve">Passing in a preprocessed lightcurve</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="section2.html">Science with lightkurve</a></li>
<li class="toctree-l1"><a class="reference internal" href="section3.html">Extracting lightcurves</a></li>
<li class="toctree-l1"><a class="reference internal" href="section4.html">Systematics correction</a></li>
</ul>
<p class="caption"><span class="caption-text">About lightkurve</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing and reporting issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../citing.html">Citing and acknowledging lightkurve</a></li>
<li class="toctree-l1"><a class="reference internal" href="../other_software.html">Other software</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">lightkurve</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="section1.html">Introduction to lightkurve</a> &raquo;</li>
        
      <li>Interactively inspecting Target Pixel Files and Lightcurves</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/tutorials/1.05-interact-with-lightcurves-and-tpf.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #D84315;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 8ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="Interactively-inspecting-Target-Pixel-Files-and-Lightcurves">
<h1>Interactively inspecting Target Pixel Files and Lightcurves<a class="headerlink" href="#Interactively-inspecting-Target-Pixel-Files-and-Lightcurves" title="Permalink to this headline">¶</a></h1>
<p>One of the most common questions we get at the Kepler/K2 Guest Observer
Office is “I see a noise blip in my K2 lightcurve. Is it real or
instrumental?” Answering the question usually entails ticking through
our (long, incomplete) mental list of conceivable, sometimes exotic
instrumental artifacts. Space-craft induced periodic motion. Rolling
band. Cosmic Rays. Collateral cosmic rays. Smear. Sudden pixel
sensitivity dropouts. Fine-guidance-sensor cross talk. Regular cross
talk. <a class="reference external" href="https://twitter.com/gully_/status/941707161058586624">Sweater
fuzzy</a>.</p>
<p>In this tutorial we introduce and explain the <code class="docutils literal notranslate"><span class="pre">tpf.interact()</span></code> tool
that accomplishes the goal of interactively inspecting the TPFs and
lightcurve simultaneously.</p>
<div class="section" id="Using-.interact()">
<h2>Using <code class="docutils literal notranslate"><span class="pre">.interact()</span></code><a class="headerlink" href="#Using-.interact()" title="Permalink to this headline">¶</a></h2>
<p>Using interact should be as simple as downloading a Kepler Target Pixel
File (TPF) and running the method <code class="docutils literal notranslate"><span class="pre">.interact()</span></code>. This method can only
be run in a Jupyter Notebook at the moment, and is limited to
lightcurves with fewer than 30000 cadences.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">lightkurve</span> <span class="k">import</span> <span class="n">KeplerTargetPixelFile</span>
<span class="n">tpf</span> <span class="o">=</span> <span class="n">KeplerTargetPixelFile</span><span class="o">.</span><span class="n">from_archive</span><span class="p">(</span><span class="mi">249928278</span><span class="p">,</span> <span class="n">campaign</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span> <span class="c1"># WASP 104 for example</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Found 1 File(s)
INFO: Found cached file ./mastDownload/K2/ktwo249928278-c15_lc/ktwo249928278-c15_lpd-targ.fits.gz with expected size 6996829. [astroquery.query]
</pre></div></div>
</div>
<p>The default lightcurves comes from the default “pipeline” mask,
typically only a few pixels centered on the target photocenter,
depending on factors like the target brightness and its expected PSF
size.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tpf</span><span class="o">.</span><span class="n">interact</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure" id="id1">
<img alt="TPF Interact demo" src="../_images/tpf_interact.gif" />
<p class="caption"><span class="caption-text">TPF Interact demo</span></p>
</div>
<p>You can move the large bottom left slider to change the location of the
verical red bar, which indicates which cadence is being shown in the TPF
postage stamp image. You can also hit the play button to automatically
play-though all the cadences. The left-and-right arrow keys on your
keyboard will tick through the cadences one-by-one, if the widget slider
is active (i.e.&nbsp;it’s the most recent thing you clicked on). The slider
beneath the TPF postage stamp image controls the screen stretch, which
defaults to logarithmic scaling initialized to 1% and 95% lower and
upper limits respectively.</p>
<p>You can move your cursor over individual data points to show hover-over
tool-tips indicating additional information about that datum. Currently
the tool tips list the cadence, time, flux, and quality flags. The tools
on the right hand side of the plots enable zooming, panning, and
toggling-off tool-tips.</p>
</div>
<div class="section" id="Passing-in-a-preprocessed-lightcurve">
<h2>Passing in a preprocessed lightcurve<a class="headerlink" href="#Passing-in-a-preprocessed-lightcurve" title="Permalink to this headline">¶</a></h2>
<p>You may wish to visualize a custom-processed lightcurve adjacent to its
TPF postage stamp representation. You can pass-in a lightcurve as an
optional keyword argument like so:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">my_custom_lc_cleaner</span><span class="p">(</span><span class="n">tpf</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Returns a custom lightcurve that uses local background subtraction&#39;&#39;&#39;</span>

    <span class="c1"># Define the background as the outermost ring of non-NaN pixels</span>
    <span class="n">aper_mask</span> <span class="o">=</span> <span class="n">tpf</span><span class="o">.</span><span class="n">pipeline_mask</span> <span class="o">*</span> <span class="kc">False</span>
    <span class="n">aper_mask</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">back_mask</span> <span class="o">=</span> <span class="o">~</span><span class="n">aper_mask</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">tpf</span><span class="o">.</span><span class="n">flux</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># Estimate the background level by the outer ring of pixels</span>
    <span class="n">lc_aper</span> <span class="o">=</span> <span class="n">tpf</span><span class="o">.</span><span class="n">to_lightcurve</span><span class="p">(</span><span class="n">aperture_mask</span><span class="o">=</span><span class="n">aper_mask</span><span class="p">)</span> <span class="o">/</span> <span class="n">aper_mask</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">lc_back</span> <span class="o">=</span> <span class="n">tpf</span><span class="o">.</span><span class="n">to_lightcurve</span><span class="p">(</span><span class="n">aperture_mask</span><span class="o">=</span><span class="n">back_mask</span><span class="p">)</span> <span class="o">/</span> <span class="n">back_mask</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

    <span class="n">lc_bg_sub</span> <span class="o">=</span> <span class="n">lc_aper</span> <span class="o">-</span> <span class="n">lc_back</span><span class="o">.</span><span class="n">flux</span>

    <span class="c1"># Remove outliers</span>
    <span class="n">lc_cln</span><span class="o">=</span> <span class="n">lc_bg_sub</span><span class="o">.</span><span class="n">remove_outliers</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">lc_cln</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">lc_cln</span> <span class="o">=</span> <span class="n">my_custom_lc_cleaner</span><span class="p">(</span><span class="n">tpf</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tpf</span><span class="o">.</span><span class="n">interact</span><span class="p">(</span><span class="n">lc</span><span class="o">=</span><span class="n">lc_cln</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure" id="id2">
<img alt="preprocessed lightcurve interaction" src="../_images/tpf_interact_preprocessed_lc.gif" />
<p class="caption"><span class="caption-text">preprocessed lightcurve interaction</span></p>
</div>
<p>Your clean lightcurve may have a different number of cadences than your
target pixel file, for example if you dropped outliers. The TPF will
show all of the available cadences by default, with missing spaces in
the lightcurve.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="section2.html" class="btn btn-neutral float-right" title="Science with lightkurve" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="1.04-lightcurve-files.html" class="btn btn-neutral" title="What are Light Curve File objects?" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright lightkurve developers and contributors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0b10',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>